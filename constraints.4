# CUIDANDO DA INTEGRIDADE DO BANCO DE DADOS

ALTER TABLE COMVENDA ADD CONSTRAINT FK_COMPRODU_COMCLIEN
		FOREIGN KEY(N_NUMECLIEN)
			REFERENCES COMCLIEN(N_NUMECLIEN)
				ON DELETE NO ACTION
				ON UPDATE NO ACTION;



ALTER TABLE COMVENDA ADD CONSTRAINT FK_COMPRODU_COMVENDE
		FOREIGN KEY(N_NUMEVENDE)
			REFERENCES COMVENDE(N_NUMEVENDE) # <-- QUERY OK 
				ON DELETE NO ACTION
				ON UPDATE NO ACTION;



ALTER TABLE COMVENDA ADD CONSTRAINT FK_COMVENDA_COMVENDE
		FOREIGN KEY(N_NUMEVENDE)
			REFERENCES COMVENDE(N_NUMEVENDE)
				ON DELETE NO ACTION
				ON UPDATE NO ACTION;


ALTER TABLE COMIVENDA ADD CONSTRAINT FK_COMIVENDA_COMPRODU
		FOREIGN KEY(N_NUMEPRODU)
			REFERENCES COMPRODU (N_NUMEPRODU)
				ON DELETE NO ACTION
				ON UPDATE NO ACTION;

ALTER TABLE COMIVENDA ADD CONSTRAINT FK_COMIVENDA_COMVENDA
		FOREIGN KEY(N_NUMEVENDA)
			REFERENCES COMVENDA (N_NUMEVENDA)
				ON DELETE NO ACTION
				ON UPDATE NO ACTION;


# SE TIVÉSSEMOS CRIANDO UMA CONSTRAINT ERRADA, PODERÍAMOS DELETÁ-LA UTILIZANDO 
# A INSTRUÇÃO IRREVERSÍVEL:

-- ALTER TABLE COMIVENDA DROP FOREIGN KEY 
-- FK_COMIVENDA_COMPRODU; 


